# ðŸ—ºï¸ Project-é’ (Qing) å‘å±•è·¯çº¿å›¾

> **æ„¿æ™¯**: æ‰“é€ å›½å†…é¢†å…ˆçš„ä¼ä¸šçº§å¾®æœåŠ¡å¼€å‘å¹³å°ï¼Œè®©å¾®æœåŠ¡å¼€å‘æ›´ç®€å•ã€æ›´é«˜æ•ˆã€æ›´å¯é ã€‚

## ï¿½ å½“å‰æ ¸å¿ƒä»»åŠ¡: v1.1.0 - è®¤è¯æœåŠ¡é‡æž„ä¸Žå®Œå–„

**ç›®æ ‡**: ä¿®å¤å®‰å…¨æ¼æ´žï¼Œå¼•å…¥ Spring Securityï¼Œæž„å»ºç”Ÿäº§çº§å®‰å…¨çš„è®¤è¯ä¸­å¿ƒã€‚

### ðŸ”´ 1. åŸºç¡€è®¾æ–½å±‚ (Infrastructure)

> *ä¼˜å…ˆçº§: æœ€é«˜ | çŠ¶æ€: å¾…å¼€å§‹*

- [x] **ä¾èµ–å‡çº§**: åœ¨ `qing-service-auth/pom.xml` ä¸­å¼•å…¥ `spring-boot-starter-security`ã€‚
- [x] **é…ç½®ç±»é‡æž„**:
  - [x] åˆ›å»º `SecurityConfig`ï¼Œé…ç½® `SecurityFilterChain`ã€‚
  - [x] å®žçŽ° `JwtAuthenticationFilter`ï¼Œæ‹¦æˆªå¹¶æ ¡éªŒ Tokenã€‚
  - [ ] é…ç½® `CorsFilter` è§£å†³è·¨åŸŸé—®é¢˜ã€‚
  - [x] å®žçŽ° `AuthenticationEntryPoint` (å¤„ç†æœªç™»å½•) å’Œ `AccessDeniedHandler` (å¤„ç†æ— æƒé™)ã€‚

### ðŸ”´ 2. é¢†åŸŸæœåŠ¡å±‚ (Domain Service)

> *ä¼˜å…ˆçº§: é«˜ | çŠ¶æ€: è¿›è¡Œä¸­*

- [x] **å®‰å…¨ç­–ç•¥å®Œå–„ (`SecurityPolicyService`)**:
  - [x] å®žçŽ° `isIpAllowed`: IP é»‘ç™½åå•æ£€æŸ¥ (Redisæ”¯æŒ)ã€‚
  - [x] å®žçŽ° `getMaxLoginAttempts`: é™åˆ¶ç™»å½•é‡è¯•æ¬¡æ•° (Redisæ”¯æŒ)ã€‚
  - [x] å®žçŽ° `getPasswordExpiredPolicy`: å¯†ç è¿‡æœŸå¼ºåˆ¶ä¿®æ”¹ (Redisæ”¯æŒ)ã€‚
- [ ] **ç”¨æˆ·è¯¦æƒ…æœåŠ¡**: å®žçŽ° `UserDetailsService`ï¼Œä»Žæ•°æ®åº“åŠ è½½ç”¨æˆ·ä¿¡æ¯å’Œæƒé™ã€‚

### ðŸ”´ 3. åº”ç”¨æœåŠ¡å±‚ (Application Service)

> *ä¼˜å…ˆçº§: ä¸­ | çŠ¶æ€: è¿›è¡Œä¸­*

- [ ] **ç™»å½•æµç¨‹å¢žå¼º**: æ•´åˆ Security è®¤è¯æµç¨‹ï¼Œè®°å½•ç™»å½•æ—¥å¿— (IP, UA, æ—¶é—´)ã€‚
- [x] **æƒé™æ³¨è§£**: å¯ç”¨ `@EnableMethodSecurity`ï¼Œåœ¨ Controller å±‚ä½¿ç”¨ `@PreAuthorize` æŽ§åˆ¶æƒé™ã€‚

---

## ðŸ“… åŽç»­è§„åˆ’ (Roadmap)

### ï¿½ Phase 2: ç›‘æŽ§ä¸Žç¨³å®šæ€§ (v1.2.0)

*é¢„è®¡æ—¶é—´: 2026 Q1*

- **ç›‘æŽ§**: é›†æˆ Prometheus + Grafanaã€‚
- **æ—¥å¿—**: ç»Ÿä¸€æ—¥å¿—æ ¼å¼ï¼ŒæŽ¥å…¥ ELK æˆ– Lokiã€‚
- **è¿½è¸ª**: æŽ¥å…¥ SkyWalking å®žçŽ°å…¨é“¾è·¯è¿½è¸ªã€‚

### âšª Phase 3: ä¸šåŠ¡è§£è€¦ä¸Žæ¶ˆæ¯é©±åŠ¨ (v1.3.0)

*é¢„è®¡æ—¶é—´: 2026 Q2*

- **æ¶ˆæ¯é˜Ÿåˆ—**: é›†æˆ RocketMQ 5.xã€‚
- **äº‹ä»¶é©±åŠ¨**: å®Œå–„é¢†åŸŸäº‹ä»¶ (Domain Event) å‘å¸ƒä¸Žæ¶ˆè´¹æœºåˆ¶ã€‚

### âšª Phase 4: äº‘åŽŸç”Ÿä¸Žé«˜çº§ç‰¹æ€§ (v2.0.0+)

- **å®¹å™¨åŒ–**: K8s éƒ¨ç½²æ¸…å•ï¼ŒHelm Chartsã€‚
- **ç½‘å…³**: é›†æˆ Spring Cloud Gatewayã€‚
- **é«˜çº§å®‰å…¨**: OAuth2 æŽˆæƒæœåŠ¡å™¨ï¼ŒMFA å¤šå› ç´ è®¤è¯ã€‚

---

## ðŸ› ï¸ æŠ€æœ¯æ ˆæ¼”è¿›é¢„è§ˆ

| æ¨¡å—         | å½“å‰çŠ¶æ€         | ç›®æ ‡çŠ¶æ€ (v1.1.0)               |
|:-----------|:-------------|:----------------------------|
| **Web å®‰å…¨** | æ—  (ä»…ç®€å•æ‹¦æˆªå™¨)   | **Spring Security 6 + JWT** |
| **æƒé™æŽ§åˆ¶**   | æ‰‹åŠ¨æ ¡éªŒ         | **RBAC + @PreAuthorize æ³¨è§£** |
| **API æ–‡æ¡£** | Knife4j (éƒ¨åˆ†) | **OpenAPI 3.0 (å®Œæ•´è¦†ç›–)**      |
| **é™æµ**     | æ—             | **Redis + Lua è„šæœ¬**          |

> Last Updated: 2025-12-28
