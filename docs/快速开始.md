# 快速开始

> ⚡ 5分钟快速上手Project-青微服务平台

## 🎯 目标

通过本指南，您将在5分钟内：
- ✅ 搭建完整的开发环境
- ✅ 启动核心服务
- ✅ 体验代码生成功能
- ✅ 调用API接口

## 📋 前置条件

确保您的环境满足以下要求：

| 工具 | 版本要求 | 检查命令 |
|------|----------|----------|
| Java | 17+ | `java -version` |
| Maven | 3.8+ | `mvn -version` |
| Docker | 20.10+ | `docker --version` |
| Git | 2.0+ | `git --version` |

## 🚀 第一步：获取代码

```bash
# 克隆项目
git clone https://gitee.com/stanChen/qing.git
cd qing

# 查看项目结构
ls -la
```

## 🐳 第二步：启动基础设施

```bash
# 启动MySQL、Redis、Nacos等基础服务
docker-compose -f scripts/docker-compose-infra.yml up -d

# 等待服务启动完成（约30秒）
docker-compose -f scripts/docker-compose-infra.yml ps
```

**验证基础服务**：
- Nacos控制台: http://localhost:8848/nacos （用户名/密码：nacos/nacos）
- MySQL: localhost:3306 （用户名/密码：root/123456）
- Redis: localhost:6379

## 🔧 第三步：初始化数据库

```bash
# 执行数据库初始化脚本
mysql -h 127.0.0.1 -P 3306 -u root -p123456 < scripts/init-db.sql

# 验证数据库创建成功
mysql -h 127.0.0.1 -P 3306 -u root -p123456 -e "SHOW DATABASES;"
```

## 📦 第四步：编译项目

```bash
# 编译所有模块（首次编译需要下载依赖，约2-3分钟）
mvn clean install -DskipTests

# 编译成功标志
echo "编译完成！"
```

## 🎮 第五步：启动服务

### 方式一：命令行启动（推荐）

```bash
# 启动认证服务（新终端窗口）
mvn spring-boot:run -pl qing-services/qing-service-auth

# 启动网关服务（新终端窗口）
mvn spring-boot:run -pl qing-service-cloud-gateway

# 启动动漫服务（新终端窗口）
mvn spring-boot:run -pl qing-services/qing-service-anime
```

### 方式二：IDE启动

1. 导入项目到IDEA
2. 运行 `AuthApplication.java`
3. 运行 `GatewayApplication.java`
4. 运行 `AnimeApplication.java`

## ✅ 第六步：验证服务

### 检查服务注册

访问Nacos控制台：http://localhost:8848/nacos

应该看到以下服务已注册：
- `qing-service-auth`
- `qing-service-gateway`
- `qing-service-anime`

### 访问API文档

- **网关API文档**: http://localhost:8080/doc.html
- **认证服务API**: http://localhost:8081/doc.html
- **动漫服务API**: http://localhost:8082/doc.html

### 测试接口调用

```bash
# 1. 用户登录
curl -X POST http://localhost:8080/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "username": "admin",
    "password": "123456"
  }'

# 2. 获取用户信息（需要替换token）
curl -X GET http://localhost:8080/api/auth/userinfo \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"

# 3. 查询动漫列表
curl -X GET http://localhost:8080/api/anime/list
```

## 🎨 第七步：体验代码生成

### 创建示例实体

在 `qing-services/qing-service-anime` 模块中创建实体：

```java
// src/main/java/cn/chenyunlong/qing/anime/domain/entity/Book.java
package cn.chenyunlong.qing.anime.domain.entity;

import cn.chenyunlong.codegen.annotation.GenCode;
import cn.chenyunlong.codegen.annotation.GenField;
import jakarta.persistence.*;
import java.math.BigDecimal;
import java.time.LocalDateTime;

@Entity
@Table(name = "book")
@GenCode(moduleName = "book", author = "青团社")
public class Book {
    
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;
    
    @GenField(label = "书名", required = true)
    @Column(nullable = false, length = 100)
    private String title;
    
    @GenField(label = "作者")
    @Column(length = 50)
    private String author;
    
    @GenField(label = "价格")
    @Column(precision = 10, scale = 2)
    private BigDecimal price;
    
    @GenField(label = "出版时间")
    private LocalDateTime publishTime;
    
    // 构造函数、getter、setter省略...
}
```

### 生成代码

```bash
# 编译触发代码生成
mvn compile -pl qing-services/qing-service-anime

# 查看生成的代码
find qing-services/qing-service-anime/src -name "*Book*" -type f
```

生成的文件包括：
- `BookController.java` - REST控制器
- `IBookService.java` - 服务接口
- `BookServiceImpl.java` - 服务实现
- `BookRepository.java` - 数据仓储
- `BookCreateRequest.java` - 创建请求DTO
- `BookUpdateRequest.java` - 更新请求DTO
- `BookResponse.java` - 响应DTO

### 重启服务验证

```bash
# 重启动漫服务
# Ctrl+C 停止服务，然后重新启动
mvn spring-boot:run -pl qing-services/qing-service-anime
```

访问 http://localhost:8082/doc.html 查看新生成的Book相关API。

## 🎉 恭喜！

您已经成功：

- ✅ 搭建了完整的微服务开发环境
- ✅ 启动了认证、网关、业务服务
- ✅ 体验了智能代码生成功能
- ✅ 验证了API接口调用

## 🔄 下一步

现在您可以：

1. **深入学习** - 阅读 [用户指南](用户指南.md) 了解更多功能
2. **架构理解** - 查看 [架构设计](架构设计.md) 了解系统设计
3. **生产部署** - 参考 [部署指南](部署指南.md) 进行生产环境部署
4. **参与贡献** - 查看 [CONTRIBUTING.md](../CONTRIBUTING.md) 参与项目开发

## 🆘 遇到问题？

### 常见问题解决

**Q: 服务启动失败，端口被占用**
```bash
# 查看端口占用
netstat -tulpn | grep :8080
# 或者修改配置文件中的端口
```

**Q: 数据库连接失败**
```bash
# 检查Docker服务状态
docker-compose -f scripts/docker-compose-infra.yml ps
# 重启数据库服务
docker-compose -f scripts/docker-compose-infra.yml restart mysql
```

**Q: Maven编译失败**
```bash
# 清理并重新编译
mvn clean
mvn install -DskipTests
```

**Q: 代码生成不生效**
```bash
# 确保实体类有@GenCode注解
# 重新编译项目
mvn clean compile -pl qing-services/qing-service-anime
```

### 获取帮助

- 📖 [完整文档](用户指南.md)
- 🐛 [问题反馈](https://gitee.com/stanChen/qing/issues)
- 💬 技术交流QQ群：123456789
- 📧 邮件支持：support@example.com

---

> 💡 **提示**: 建议将本页面加入书签，方便随时查阅。如果您是团队新成员，可以将此指南分享给其他同事。